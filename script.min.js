let skills=[{name:"figma",weight:.1,has:!1},{name:"wireframing",weight:.06,has:!1},{name:"prototyping",weight:.08,has:!1},{name:"usability_testing",weight:.08,has:!1},{name:"heuristic_evaluation",weight:.05,has:!1},{name:"user_interviews",weight:.07,has:!1},{name:"accessibility",weight:.06,has:!1},{name:"html_css",weight:.05,has:!1},{name:"javascript",weight:.04,has:!1},{name:"python",weight:.04,has:!1},{name:"sql",weight:.03,has:!1},{name:"ab_testing",weight:.04,has:!1},{name:"data_visualization",weight:.03,has:!1}],totalWeight=skills.reduce(((e,t)=>e+t.weight),0),totalSkills=skills.length,skillsContainer=document.getElementById("skills"),computeButton=document.getElementById("compute"),rawPctEl=document.getElementById("rawPct"),weightedPctEl=document.getElementById("wPct"),missingListEl=document.getElementById("missingList"),explainEl=document.getElementById("explain"),chartCanvas=document.getElementById("chart"),swatches=document.querySelectorAll('.swatch'),downloadBtn=document.getElementById("downloadPdf"),chart=new Chart(chartCanvas,{type:"doughnut",data:{labels:["Covered","Uncovered"],datasets:[{data:[0,totalWeight],backgroundColor:["#22c55e","#334155"],borderColor:["#16a34a","#1f2937"],borderWidth:1}]},options:{cutout:"60%",animation:!1,plugins:{legend:{labels:{color:"#e5e7eb"}}}}});function setAccent(e){document.documentElement.style.setProperty("--accent",e),chart&&(chart.data.datasets[0].backgroundColor=[e,"#334155"],chart.data.datasets[0].borderColor=[shadeColor(e,-12),"#1f2937"],chart.update("none")),localStorage.setItem("accentColor",e),swatches.forEach((t=>t.classList.toggle("active",t.dataset.color===e)))}function shadeColor(e,t){const a=parseInt(e.replace("#",""),16);let i=a>>16&255,o=a>>8&255,l=255&a;return i=Math.max(0,Math.min(255,Math.floor(i*(100+t)/100))),o=Math.max(0,Math.min(255,Math.floor(o*(100+t)/100))),l=Math.max(0,Math.min(255,Math.floor(l*(100+t)/100))),"#"+(1<<24|i<<16|o<<8|l).toString(16).slice(1)}function renderSkills(){let e="";skills.forEach(((t,a)=>{const i=`skill_${a}`;e+=`<label for="${i}" class="${t.has?"selected":""}"><input id="${i}" name="skills" type="checkbox" data-idx="${a}" ${t.has?"checked":""}/> ${t.name.replaceAll("_"," ")}</label>`})),skillsContainer.innerHTML=e}skillsContainer.addEventListener("change",(e=>{const t=e.target;if(t&&t.matches('input[type="checkbox"]')){const e=Number(t.dataset.idx);if(!Number.isNaN(e)){skills[e].has=t.checked;const a=t.closest("label");a&&(t.checked?a.classList.add("selected"):a.classList.remove("selected"))}}}));skillsContainer.addEventListener("click",(e=>{const t=e.target.closest("label");if(!t)return;const a=t.querySelector('input[type="checkbox"]');if(!a)return;a.checked=!a.checked;const i=Number(a.dataset.idx);Number.isNaN(i)||(skills[i].has=a.checked,t.classList.toggle("selected",a.checked))}));function compute(){let e=0,t=0;for(const a of skills)a.has&&(e++,t+=a.weight);const a=e/totalSkills,i=t/totalWeight;rawPctEl.innerText=(100*a).toFixed(1)+"%",weightedPctEl.innerText=(100*i).toFixed(1)+"%";const o=totalWeight-t;chart.data.datasets[0].data=[t,o],chart.update("none");const l=skills.filter((e=>!e.has)).sort(((e,t)=>t.weight-e.weight))[0];missingListEl.innerText=l?"Top missing skill: "+l.name.replaceAll("_"," "):"All skills covered",explainEl.innerText=`Raw coverage counts how many skills are selected (${e} of ${totalSkills}). Weighted coverage sums the importance of selected skills (${t.toFixed(2)} of ${totalWeight.toFixed(2)} total weight).`}computeButton.onclick=compute,renderSkills();const savedAccent=localStorage.getItem("accentColor");savedAccent&&setAccent(savedAccent),swatches.forEach((e=>e.addEventListener("click",(()=>setAccent(e.dataset.color)))));const colorTrigger=document.getElementById("colorTrigger"),colorMenu=document.getElementById("colorMenu"),printBtn=document.getElementById("printPage");null==colorTrigger||colorTrigger.addEventListener("click",(()=>{const e=!colorMenu.hasAttribute("hidden");e?(colorMenu.setAttribute("hidden",""),colorTrigger.setAttribute("aria-expanded","false")):(colorMenu.removeAttribute("hidden"),colorTrigger.setAttribute("aria-expanded","true"))})),document.addEventListener("click",(e=>{colorMenu&&colorTrigger&&(colorMenu.contains(e.target)||colorTrigger.contains(e.target)||colorMenu.hasAttribute("hidden")||(colorMenu.setAttribute("hidden",""),colorTrigger.setAttribute("aria-expanded","false")))})),null==printBtn||printBtn.addEventListener("click",(()=>{window.print()}));
